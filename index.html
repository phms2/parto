<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birth Plan - Fernanda & Pedro</title>
    <!-- Tailwind CSS with Dark Mode Configuration -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        darkbg: '#1a1a1a',
                        darkcard: '#2d2d2d'
                    }
                }
            }
        }
    </script>
    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        /* Smooth transition for text scaling */
        .dynamic-text-sizing * {
            transition: font-size 0.2s ease-out, line-height 0.2s ease-out;
        }
        @media print {
            .no-print { display: none !important; }
            body { background: white; color: black !important; }
            .print-break-inside-avoid { break-inside: avoid; }
            .shadow-lg { box-shadow: none !important; }
            .bg-gray-50 { background-color: white !important; }
            /* Ensure dark mode colors don't print */
            .dark .bg-gray-900 { background-color: white !important; }
            .dark .text-white { color: black !important; }
            .dark .bg-gray-800 { background-color: white !important; border: 1px solid #ddd !important; }
        }
    </style>
</head>
<body class="bg-gray-50 text-slate-800 transition-colors duration-300">

<div id="root"></div>

<script type="text/babel">
    const { useState, useEffect } = React;

    // --- ICON COMPONENTS ---
    const IconWrapper = ({ children, size = 24, className = "" }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
            {children}
        </svg>
    );

    const Globe = (props) => <IconWrapper {...props}><circle cx="12" cy="12" r="10"/><line x1="2" x2="22" y1="12" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></IconWrapper>;
    const Printer = (props) => <IconWrapper {...props}><polyline points="6 9 6 2 18 2 18 9"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><rect width="12" height="8" x="6" y="14"/></IconWrapper>;
    const CheckSquare = (props) => <IconWrapper {...props}><path d="m9 11 3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1-2-2h11"/></IconWrapper>;
    const AlertTriangle = (props) => <IconWrapper {...props}><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" x2="12" y1="9" y2="13"/><line x1="12" x2="12.01" y1="17" y2="17"/></IconWrapper>;
    const Baby = (props) => <IconWrapper {...props}><path d="M9 12h.01"/><path d="M15 12h.01"/><path d="M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5"/><path d="M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 4 .5 5.7 1.6"/><path d="M12 3v-1"/></IconWrapper>;
    const Info = (props) => <IconWrapper {...props}><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></IconWrapper>;
    const User = (props) => <IconWrapper {...props}><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></IconWrapper>;
    const Eye = (props) => <IconWrapper {...props}><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></IconWrapper>;
    const EyeOff = (props) => <IconWrapper {...props}><path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7c.44 0 .87-.03 1.28-.09"/><line x1="2" x2="22" y1="2" y2="22"/></IconWrapper>;
    const FileText = (props) => <IconWrapper {...props}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" x2="8" y1="13" y2="13"/><line x1="16" x2="8" y1="17" y2="17"/><line x1="10" x2="8" y1="9" y2="9"/></IconWrapper>;
    const Heart = (props) => <IconWrapper {...props}><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5 4.5 1.5-1.5-1-4.5-1-5.5-1-5.5C6.8 3 5 4.92 5 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></IconWrapper>;
    const Moon = (props) => <IconWrapper {...props}><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></IconWrapper>;
    const Sun = (props) => <IconWrapper {...props}><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></IconWrapper>;
    const Phone = (props) => <IconWrapper {...props}><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></IconWrapper>;
    const X = (props) => <IconWrapper {...props}><path d="M18 6 6 18"/><path d="m6 6 12 12"/></IconWrapper>;
    const MessageCircle = (props) => <IconWrapper {...props}><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></IconWrapper>;
    const Hospital = (props) => <IconWrapper {...props}><path d="M12 6V2H8"/><path d="m8 8-2.21 1.46a4 4 0 0 0-1.8 3.18L4 22h16l.01-9.36a4 4 0 0 0-1.8-3.18L16 8"/><path d="M12 12v4"/><path d="M10 14h4"/></IconWrapper>;

    const BirthPlanApp = () => {
        const [globalLang, setGlobalLang] = useState('en');
        const [activeTab, setActiveTab] = useState('plan');
        const [showAllLangs, setShowAllLangs] = useState(false);
        const [checkedItems, setCheckedItems] = useState({});
        const [darkMode, setDarkMode] = useState(false);
        const [showContactModal, setShowContactModal] = useState(false);
        const [textScale, setTextScale] = useState(1); // 1 = 100%

        const PEDRO_PHONE = "+35677544172";
        const PEDRO_WHATSAPP = "35677544172";

        // Languages configuration
        const languages = {
            en: { label: 'English', flag: 'üá¨üáß' },
            pt: { label: 'Portugu√™s', flag: 'üáßüá∑' },
            mt: { label: 'Maltese', flag: 'üá≤üáπ' }
        };

        const toggleCheck = (id) => {
            setCheckedItems(prev => ({ ...prev, [id]: !prev[id] }));
        };

        const changeTextSize = (delta) => {
            setTextScale(prev => {
                const newScale = prev + delta;
                return Math.min(Math.max(newScale, 0.8), 2.0); // Limit between 80% and 200%
            });
        };

        // --- DYNAMIC STYLE GENERATION FOR TEXT SCALING ---
        const generateDynamicStyles = () => {
            // Tailwind Defaults in Rem
            const sizes = {
                'xs': 0.75,
                'sm': 0.875,
                'base': 1,
                'lg': 1.125,
                'xl': 1.25,
                '2xl': 1.5,
                '3xl': 1.875
            };

            let styleString = '';
            Object.entries(sizes).forEach(([key, val]) => {
                const newSize = val * textScale;
                const newLineHeight = newSize * 1.5; // Ensure good line height for readability
                styleString += `
                    .dynamic-text-sizing .text-${key} { 
                        font-size: ${newSize}rem !important; 
                        line-height: ${newLineHeight}rem !important;
                    }
                `;
            });
            // Also scale paragraphs and divs that might implicitly be text-base
            styleString += `
                .dynamic-text-sizing p, .dynamic-text-sizing span, .dynamic-text-sizing li, .dynamic-text-sizing div {
                    font-size: ${1 * textScale}rem;
                }
            `;
            return styleString;
        };


        // --- DATA ---
        const headerData = {
            names: "Fernanda Righi Viana & Pedro Henrique Mendes Simpl√≠cio",
            dueDate: {
                en: "Due Date (40w): 18/02/2026",
                pt: "Data Prevista (40s): 18/02/2026",
                mt: "Data Mistennija (40ƒ°): 18/02/2026"
            },
            intro: {
                en: "Hello, we are Fernanda (Mom) and Pedro (Dad). We are very excited to meet our daughter, Flora. This document reflects our preferences for a safe and respectful birth at Mater Dei.",
                pt: "Ol√°, somos a Fernanda (M√£e) e o Pedro (Pai). Estamos muito felizes por conhecer a nossa filha, Flora. Este documento reflete as nossas prefer√™ncias para um parto seguro e respeitoso no Mater Dei.",
                mt: "Hello, aƒßna Fernanda (l-Omm) u Pedro (il-Missier). Ninsabu eƒãƒãitati ƒßafna biex niltaqgƒßu ma' bintha, Flora. Dan id-dokument jirrifletti l-preferenzi tagƒßna gƒßal twelid sigur u rispettu≈º f'Mater Dei."
            }
        };

        const criticalData = {
            title: { en: "‚ö†Ô∏è CRITICAL COMMUNICATION", pt: "‚ö†Ô∏è COMUNICA√á√ÉO CR√çTICA", mt: "‚ö†Ô∏è KOMUNIKAZZJONI KRITIKA" },
            items: [
                { id: 'crit_1', en: "I am not fluent in English. In the absence of my partner, I will use Google Translate.", pt: "N√£o sou fluente em ingl√™s. Na aus√™ncia do meu marido, usarei o Google Tradutor.", mt: "M'iniex fluwenti fl-Ingli≈º. Fin-nuqqas tas-sieƒßeb tiegƒßi, se nu≈ºa Google Translate." },
                { id: 'crit_2', en: "Please perform all screenings and exams only when Pedro is present to translate (except emergencies).", pt: "Por favor, realizem triagens e exames apenas quando o Pedro estiver presente para traduzir (exceto emerg√™ncias).", mt: "Jekk jogƒßƒ°bok wettaq l-e≈ºamijiet kollha biss meta Pedro jkun pre≈ºenti biex jittraduƒãi (ƒßlief f'emerƒ°enzi)." },
                { id: 'crit_3', en: "I may spend nights alone (partner caring for older son). I ask for extra patience.", pt: "Poderei passar as noites sozinha (marido com filho mais velho). Pe√ßo paci√™ncia extra.", mt: "Nista' nqatta' l-iljieli waƒßdi. Nitlob paƒãenzja ≈ºejda." }
            ]
        };

        const birthPlanSections = [
            {
                title: { en: "1. Labour & Delivery", pt: "1. Trabalho de Parto", mt: "1. Il-ƒ¶las" },
                icon: <Hospital className="w-5 h-5 text-rose-500" />,
                items: [
                    { id: 'bp_1', en: "Environment: Low lights, quiet, own clothes/music.", pt: "Ambiente: Luzes baixas, calmo, roupas pr√≥prias e m√∫sica.", mt: "Ambjent: Dwal baxxi, kwiet, ƒßwejjeƒ°/mu≈ºika proprja." },
                    { id: 'bp_2', en: "Mobility: Freedom to move, walk, and use the birth ball.", pt: "Mobilidade: Liberdade de movimento, caminhar e bola de pilates.", mt: "Mobilit√†: Libert√† li niƒãƒãaqlaq, nimxi u nu≈ºa l-birth ball." },
                    { id: 'bp_3', en: "Interventions: No routine amniotomy or synthetic oxytocin unless medically necessary.", pt: "Interven√ß√µes: Sem ruptura artificial da bolsa ou oxitocina de rotina, salvo necessidade m√©dica.", mt: "Interventi: L-ebda amniotomija ta' rutina jew oxytocin sintetiku sakemm mhux medikament meƒßtieƒ°." },
                    { id: 'bp_4', en: "Pushing: Freedom of position. NO Kristeller Maneuver.", pt: "Expulsivo: Liberdade de posi√ß√£o. SEM Manobra de Kristeller.", mt: "Imbuttar: Libert√† tal-po≈ºizzjoni. L-EBDA Manuvra Kristeller." },
                    { id: 'bp_5', en: "Episiotomy: Not authorized as routine. Only if strictly necessary (with anesthesia).", pt: "Episiotomia: N√£o autorizada como rotina. Apenas se estritamente necess√°ria (com anestesia).", mt: "Episjotomija: Mhux awtorizzata bƒßala rutina. Biss jekk strettament meƒßtieƒ° (bl-anestesija)." },
                    { id: 'bp_6', en: "Placenta: Physiological third stage preferred. No routine oxytocin.", pt: "Placenta: Prefer√™ncia pela sa√≠da natural (fisiol√≥gica). Sem oxitocina de rotina.", mt: "Plaƒãenta: Preferuta t-tielet stadju fi≈ºjoloƒ°iku. L-ebda oxytocin ta' rutina." }
                ]
            },
            {
                title: { en: "2. Pain Management", pt: "2. Gest√£o da Dor", mt: "2. ƒ†estjoni tal-Uƒ°igƒß" },
                icon: <AlertTriangle className="w-5 h-5 text-yellow-500" />,
                items: [
                    { id: 'pm_1', en: "Preference Order: 1. Natural methods -> 2. Entonox (Gas) -> 3. Pethidine -> 4. Epidural (Last option).", pt: "Ordem de prefer√™ncia: 1. M√©todos naturais -> 2. Entonox (G√°s) -> 3. Petidina -> 4. Epidural (√öltima op√ß√£o).", mt: "Ordni ta' preferenza: 1. Metodi naturali -> 2. Entonox (Gass) -> 3. Pethidine -> 4. Epidural (L-aƒßƒßar gƒßa≈ºla)." }
                ]
            },
            {
                title: { en: "3. Newborn Care (Flora)", pt: "3. Cuidados com a Flora", mt: "3. Kura tat-Tarbija tat-Twelid" },
                icon: <Baby className="w-5 h-5 text-blue-400" />,
                items: [
                    { id: 'nb_1', en: "Golden Hour: Immediate skin-to-skin for at least 1 hour. No interruptions.", pt: "Golden Hour: Pele a pele imediato por pelo menos 1 hora. Sem interrup√ß√µes.", mt: "Siegƒßa tad-Deheb: Kuntatt immedjat ƒ°ilda ma' ƒ°ilda gƒßal mill-inqas siegƒßa." },
                    { id: 'nb_2', en: "Cord Clamping: Delayed (wait until pulsing stops).", pt: "Cord√£o Umbilical: Clampeamento tardio (ap√≥s parar de pulsar).", mt: "Kurdun ta≈º-≈ªokra: Ikklampjar tard (stenna sakemm jieqaf jippulsa)." },
                    { id: 'nb_3', en: "BATHING: DO NOT bathe the baby at the hospital. First bath at home.", pt: "BANHO: N√ÉO dar banho no hospital. Primeiro banho em casa.", mt: "BANJU: T-TINƒ¶ASILX it-tarbija l-isptar. L-ewwel banju d-dar." },
                    { id: 'nb_4', en: "Vitamin K: Authorized (Injection). BCG: Please consult before administration.", pt: "Vitamina K: Autorizada (Inje√ß√£o). BCG: Consultar antes de administrar.", mt: "Vitamina K: Awtorizzata (Injezzjoni). BCG: Jekk jogƒßƒ°bok ikkonsulta qabel l-amministrazzjoni." },
                    { id: 'nb_5', en: "Feeding: Exclusive breastfeeding. No formula/pacifiers.", pt: "Alimenta√ß√£o: Amamenta√ß√£o exclusiva. Sem f√≥rmula/chupetas.", mt: "Tmigƒß: Treddigƒß esklussiv. L-ebda formula/pacifiers." },
                    { id: 'nb_6', en: "Screening: Heel prick test and weighing to be done at home by community midwife.", pt: "Rastreio: Teste do pezinho e pesagem feitos em casa pela parteira comunit√°ria.", mt: "Screening: Test tat-takkuna u l-u≈ºin li gƒßandu jsir id-dar." }
                ]
            },
            {
                title: { en: "4. C-Section (If needed)", pt: "4. Cesariana (Se necess√°rio)", mt: "4. Taqsima ƒä (Jekk meƒßtieƒ°)" },
                icon: <Info className="w-5 h-5 text-purple-500" />,
                items: [
                    { id: 'cs_1', en: "Partner present at all times. Arms free. Screen lowered for birth.", pt: "Acompanhante sempre presente. Bra√ßos livres. Baixar o campo cir√∫rgico para ver o nascimento.", mt: "Sieƒßeb pre≈ºenti f'kull ƒßin. Dirgƒßajn ƒßielsa. Skrin imni≈º≈ºel gƒßat-twelid." }
                ]
            }
        ];

        const packingListSections = [
            {
                title: { en: "Flora's Bag (Baby)", pt: "Mala da Flora", mt: "Bor≈ºa ta' Flora" },
                items: [
                    { id: 'f_1', label: "Outfit #1 (The First One - Hand to Nurse)", sub: "Body, Trousers, Onesie, Hat, Socks, Nappy, Blanket" },
                    { id: 'f_2', label: "4x Change Kits", sub: "Body + Trousers + Onesie + Socks + Hat" },
                    { id: 'f_3', label: "2x Swaddles (Zipper/Velcro)" },
                    { id: 'f_4', label: "2x Extra Blankets (1 Warm, 1 Cotton)" },
                    { id: 'f_5', label: "3x Muslin Squares (Burp cloths)" },
                    { id: 'f_6', label: "2x Thin Towels" },
                    { id: 'f_7', label: "20x Newborn Nappies (Size 1)" },
                    { id: 'f_8', label: "WaterWipes & Cotton Wool" },
                    { id: 'f_9', label: "Nappy Rash Cream" },
                    { id: 'f_10', label: "White Noise Machine & Night Light" },
                    { id: 'f_11', label: "Silicone Breast Pump (Haakaa)" }
                ]
            },
            {
                title: { en: "Fernanda's Bag (Mom)", pt: "Mala da Fernanda", mt: "Bor≈ºa ta' Fernanda" },
                items: [
                    { id: 'm_1', label: "Peri Bottle (Washing bottle)" },
                    { id: 'm_2', label: "8x Postpartum Nappies (Always Discreet Black)" },
                    { id: 'm_3', label: "Ice Pads (Toytastic)" },
                    { id: 'm_4', label: "Relief Spray/Foam (Frida/Lansinoh)" },
                    { id: 'm_5', label: "Vaseline & Hemorrhoid Cream" },
                    { id: 'm_6', label: "3x Comfortable Panties (Extra)" },
                    { id: 'm_7', label: "Toiletries (Shampoo, Soap, Toothbrush)" },
                    { id: 'm_8', label: "Hairbrush + Ties" },
                    { id: 'm_9', label: "Lip Balm (Crucial for Gas & Air)" },
                    { id: 'm_10', label: "Labour Outfit (Loose shirt)" },
                    { id: 'm_11', label: "3x Nursing Pyjamas (Dark colours)" },
                    { id: 'm_12', label: "Warm Socks & Slippers (Shower + Bedroom)" },
                    { id: 'm_13', label: "Lanolin Cream (Small)" },
                    { id: 'm_14', label: "Disposable Underpads (5-10 pack)" },
                    { id: 'm_15', label: "No-rinse Cleanser & Large Cotton Pads" },
                    { id: 'm_16', label: "Nursing Arm Pillow" }
                ]
            },
            {
                title: { en: "Documents & Logistics (Pedro)", pt: "Documentos e Pedro", mt: "Dokumenti u Pedro" },
                items: [
                    { id: 'd_1', label: "Passports (Yours + Pedro's)" },
                    { id: 'd_2', label: "Antenatal Notes & Exams" },
                    { id: 'd_3', label: "Birth Plan (3 printed copies)" },
                    { id: 'd_4', label: "Snacks (Dates, Nuts, Bars) & Coins" },
                    { id: 'd_5', label: "Car Seat (Installed)" },
                    { id: 'd_6', label: "Hot Water Bottle" },
                    { id: 'd_7', label: "Phone + Long Charger (2m+)" }
                ]
            }
        ];

        // --- COMPONENTS ---

        const ContactModal = () => (
            <div className="fixed inset-0 bg-black bg-opacity-50 z-[100] flex items-center justify-center p-4">
                <div className="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-2xl max-w-sm w-full relative animate-in fade-in zoom-in duration-200">
                    <button 
                        onClick={() => setShowContactModal(false)}
                        className="absolute top-4 right-4 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"
                    >
                        <X size={24} />
                    </button>
                    
                    <h3 className="text-xl font-bold text-gray-900 dark:text-white mb-6 text-center">Contact Pedro</h3>
                    
                    <div className="space-y-4">
                        <a 
                            href={`tel:${PEDRO_PHONE}`}
                            className="flex items-center justify-center gap-3 w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-lg transition-colors text-lg"
                        >
                            <Phone size={24} /> Call Now
                        </a>
                        
                        <a 
                            href={`https://wa.me/${PEDRO_WHATSAPP}`}
                            target="_blank"
                            className="flex items-center justify-center gap-3 w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg transition-colors text-lg"
                        >
                            <MessageCircle size={24} /> WhatsApp
                        </a>

                        <a 
                            href={`skype:${PEDRO_PHONE}?call`}
                            className="flex items-center justify-center gap-3 w-full bg-sky-500 hover:bg-sky-600 text-white font-bold py-3 px-4 rounded-lg transition-colors text-lg"
                        >
                            <span className="font-bold text-2xl">S</span> Skype Call
                        </a>
                    </div>
                    <p className="mt-4 text-center text-sm text-gray-500 dark:text-gray-400">
                        {PEDRO_PHONE}
                    </p>
                </div>
            </div>
        );

        const PlanItem = ({ item }) => {
            const [isExpanded, setIsExpanded] = useState(false);

            // MODE 1: SHOW ALL LANGUAGES (PRINT MODE)
            if (showAllLangs) {
                return (
                    <div className="mb-4 p-4 rounded-lg border border-gray-200 bg-white shadow-sm print-break-inside-avoid">
                        <div className="font-bold text-gray-900 mb-1 text-lg">üá¨üáß {item.en}</div>
                        <div className="text-gray-700 mb-1 text-base">üáßüá∑ {item.pt}</div>
                        <div className="text-gray-500 italic text-sm">üá≤üáπ {item.mt}</div>
                    </div>
                );
            }

            // MODE 2: INTERACTIVE TOGGLE
            return (
                <div
                    className={`mb-3 p-3 rounded-lg border cursor-pointer transition-all ${
                        isExpanded 
                            ? 'bg-indigo-50 border-indigo-200 dark:bg-indigo-900/30 dark:border-indigo-800' 
                            : 'bg-white border-gray-100 hover:border-indigo-300 dark:bg-gray-800 dark:border-gray-700 dark:hover:border-indigo-600'
                    }`}
                    onClick={() => setIsExpanded(!isExpanded)}
                >
                    <div className="flex justify-between items-start">
                        <p className={`font-medium ${
                            isExpanded ? 'mb-2 text-indigo-900 dark:text-indigo-200' : 'text-gray-800 dark:text-gray-100'
                        }`}>
                            {item[globalLang]}
                        </p>
                        <button className="text-gray-400 hover:text-indigo-600 dark:text-gray-500 dark:hover:text-indigo-400 ml-2 mt-1">
                            <Globe size={16} />
                        </button>
                    </div>

                    {isExpanded && (
                        <div className="mt-2 pt-2 border-t border-indigo-100 dark:border-indigo-800/50 space-y-2 text-gray-600 dark:text-gray-300">
                            {Object.keys(languages).map((langKey) => {
                                if (langKey === globalLang) return null;
                                return (
                                    <div key={langKey} className="flex gap-2">
                                        <span className="shrink-0 pt-0.5">{languages[langKey].flag}</span>
                                        <span>{item[langKey]}</span>
                                    </div>
                                );
                            })}
                        </div>
                    )}
                </div>
            );
        };

        return (
            <div className={`dynamic-text-sizing min-h-screen font-sans pb-10 transition-colors duration-300 ${darkMode ? 'dark bg-gray-900' : 'bg-gray-50'}`}>
                
                {/* INJECT DYNAMIC STYLES */}
                <style>{generateDynamicStyles()}</style>

                {showContactModal && <ContactModal />}

                {/* --- TOP BAR (NO PRINT) --- */}
                <div className="sticky top-0 bg-white dark:bg-gray-800 shadow-md p-3 z-50 no-print transition-colors duration-300">
                    <div className="max-w-4xl mx-auto flex flex-col md:flex-row justify-between items-center gap-3">

                        {/* Language Toggles */}
                        <div className="flex bg-gray-100 dark:bg-gray-700 p-1 rounded-lg">
                            {Object.keys(languages).map((lang) => (
                                <button
                                    key={lang}
                                    onClick={() => { setGlobalLang(lang); setShowAllLangs(false); }}
                                    className={`px-3 py-2 rounded-md text-sm font-medium transition-all ${
                                        globalLang === lang && !showAllLangs
                                            ? 'bg-indigo-600 text-white shadow-md'
                                            : 'text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'
                                    }`}
                                >
                                    {languages[lang].flag} <span className="hidden sm:inline">{languages[lang].label}</span>
                                </button>
                            ))}
                        </div>

                        {/* Mode Toggles */}
                        <div className="flex gap-2 w-full md:w-auto items-center">
                           
                            {/* Contact Pedro Button */}
                            <button
                                onClick={() => setShowContactModal(true)}
                                className="flex-1 md:flex-none flex items-center justify-center gap-2 px-4 py-2 rounded-md text-sm font-bold bg-green-500 hover:bg-green-600 text-white transition-all shadow-sm"
                            >
                                <Phone size={18} /> <span className="hidden sm:inline">Call Pedro</span>
                            </button>

                           {/* Show All Langs Toggle */}
                            <button
                                onClick={() => setShowAllLangs(!showAllLangs)}
                                className={`flex-1 md:flex-none flex items-center justify-center gap-2 px-4 py-2 rounded-md text-sm font-bold border transition-all ${
                                    showAllLangs
                                        ? 'bg-slate-800 text-white border-slate-800 ring-2 ring-slate-300'
                                        : 'bg-white dark:bg-gray-700 text-slate-700 dark:text-gray-200 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600'
                                }`}
                            >
                                {showAllLangs ? <EyeOff size={18} /> : <Eye size={18} />}
                                <span className="hidden sm:inline">{showAllLangs ? "Hide" : "View All"}</span>
                            </button>

                            {/* Font Size Toggles */}
                            <div className="flex items-center gap-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md p-1 h-10">
                                <button 
                                    onClick={() => changeTextSize(-0.1)} 
                                    className="px-2 h-full hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded text-xs font-bold"
                                    title="Decrease Font Size"
                                >
                                    A-
                                </button>
                                <div className="text-xs text-gray-400 w-8 text-center">{Math.round(textScale * 100)}%</div>
                                <button 
                                    onClick={() => changeTextSize(0.1)} 
                                    className="px-2 h-full hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded text-sm font-bold"
                                    title="Increase Font Size"
                                >
                                    A+
                                </button>
                            </div>

                            {/* Dark Mode Toggle */}
                            <button 
                                onClick={() => setDarkMode(!darkMode)}
                                className="p-2 h-10 w-10 flex items-center justify-center bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-yellow-400 transition-colors"
                            >
                                {darkMode ? <Sun size={20} /> : <Moon size={20} />}
                            </button>

                            <button onClick={() => window.print()} className="p-2 h-10 w-10 flex items-center justify-center bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200">
                                <Printer size={20} />
                            </button>
                        </div>
                    </div>
                    
                     {/* Tab Toggles */}
                    <div className="max-w-4xl mx-auto mt-3 flex bg-gray-100 dark:bg-gray-700 p-1 rounded-lg">
                        <button
                            onClick={() => setActiveTab('plan')}
                            className={`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-md text-sm font-bold transition-all ${
                                activeTab === 'plan' ? 'bg-rose-500 text-white shadow' : 'text-gray-600 dark:text-gray-300'
                            }`}
                        >
                            <FileText size={16} /> Birth Plan
                        </button>
                        <button
                            onClick={() => setActiveTab('bag')}
                            className={`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-md text-sm font-bold transition-all ${
                                activeTab === 'bag' ? 'bg-teal-500 text-white shadow' : 'text-gray-600 dark:text-gray-300'
                            }`}
                        >
                            <CheckSquare size={16} /> Bag Checklist
                        </button>
                    </div>
                </div>

                {/* --- CONTENT AREA --- */}
                <div className="p-4 sm:p-8 max-w-4xl mx-auto bg-white dark:bg-gray-800 min-h-screen shadow-lg mt-4 sm:rounded-xl transition-colors duration-300 print:shadow-none print:mt-0 print:p-0">

                    {/* HEADER */}
                    <div className="text-center mb-8 border-b-2 border-gray-100 dark:border-gray-700 pb-6 print:border-b-2 print:border-black">
                        <h1 className="text-2xl sm:text-3xl font-black text-indigo-900 dark:text-indigo-100 mb-3 tracking-wide uppercase leading-tight print:text-black">
                            BIRTH PLAN <span className="text-rose-400 mx-1">‚Ä¢</span> PLANO DE PARTO <span className="text-rose-400 mx-1">‚Ä¢</span> PJAN TAT-TWELID
                        </h1>
                        <h2 className="text-lg text-gray-600 dark:text-gray-300 font-semibold mb-1">
                            {headerData.names}
                        </h2>
                        <div className="inline-block bg-indigo-50 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-100 px-4 py-1 rounded-full text-sm font-bold mb-4 mt-2 print:border print:border-gray-300">
                            {headerData.dueDate[globalLang]}
                        </div>
                        
                        <p className="text-gray-500 dark:text-gray-400 italic max-w-2xl mx-auto text-sm">
                            {showAllLangs ? headerData.intro.en : headerData.intro[globalLang]}
                        </p>
                    </div>

                    {/* --- BIRTH PLAN TAB --- */}
                    {activeTab === 'plan' && (
                        <div className="space-y-6">

                            {/* CRITICAL ALERT BOX */}
                            <div className="bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 p-4 rounded-r-lg shadow-sm print:border-2 print:border-red-500 print:bg-white">
                                <div className="flex items-center gap-2 mb-3">
                                    <AlertTriangle className="text-red-600 dark:text-red-400" />
                                    <h3 className="font-bold text-red-800 dark:text-red-200 uppercase">
                                        {showAllLangs ? "‚ö†Ô∏è CRITICAL COMMUNICATION / COMUNICA√á√ÉO" : criticalData.title[globalLang]}
                                    </h3>
                                </div>
                                <div className="space-y-3">
                                    {criticalData.items.map((item) => (
                                        <PlanItem key={item.id} item={item} />
                                    ))}
                                </div>
                            </div>

                            {/* PLAN SECTIONS */}
                            <div className={showAllLangs ? "grid gap-8" : "grid gap-6"}>
                                {birthPlanSections.map((section, idx) => (
                                    <div key={idx} className={`rounded-xl ${
                                        showAllLangs 
                                            ? 'print:border-t-2 print:border-black pt-4' 
                                            : 'bg-white dark:bg-gray-800 p-5 shadow-sm border border-gray-200 dark:border-gray-700'
                                    }`}>
                                        <div className="flex items-center gap-3 mb-4 border-b dark:border-gray-700 pb-2">
                                            {section.icon}
                                            <h2 className="text-xl font-bold text-gray-800 dark:text-white">
                                                {showAllLangs
                                                    ? `${section.title.en} / ${section.title.pt}`
                                                    : section.title[globalLang]}
                                            </h2>
                                        </div>
                                        <div className="space-y-2">
                                            {section.items.map((item) => (
                                                <PlanItem key={item.id} item={item} />
                                            ))}
                                        </div>
                                    </div>
                                ))}
                            </div>

                            {/* FOOTER */}
                            <div className="mt-12 text-center p-8 bg-indigo-50 dark:bg-gray-700/50 rounded-xl print:bg-white print:border-t">
                                <span className="text-4xl text-rose-400 font-serif block mb-4">‚úø</span>
                                <p className="text-lg font-medium text-indigo-900 dark:text-indigo-100">
                                    {globalLang === 'en' && "Thank you for helping us bring Flora safely into the world!"}
                                    {globalLang === 'pt' && "Obrigado por nos ajudarem a trazer a Flora ao mundo com seguran√ßa!"}
                                    {globalLang === 'mt' && "Grazzi talli gƒßentuna nƒ°ibu lil Flora fid-dinja b'sigurt√†!"}
                                </p>
                            </div>
                        </div>
                    )}

                    {/* --- BAG CHECKLIST TAB --- */}
                    {activeTab === 'bag' && (
                        <div className="space-y-6 animate-in fade-in duration-300">
                            {!showAllLangs && (
                                <div className="bg-teal-50 dark:bg-teal-900/20 border-l-4 border-teal-500 p-4 rounded-r-lg mb-6 no-print">
                                    <p className="text-teal-800 dark:text-teal-200 font-medium">
                                        {globalLang === 'pt'
                                            ? "Checklist Interativo: Clique nas caixas para marcar o que j√° foi guardado."
                                            : "Interactive Checklist: Click the boxes to mark items as packed."}
                                    </p>
                                </div>
                            )}

                            <div className="grid md:grid-cols-2 gap-6">
                                {packingListSections.map((section, idx) => (
                                    <div key={idx} className={`bg-white dark:bg-gray-800 p-5 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 ${idx === 2 ? 'md:col-span-2' : ''} print:border`}>
                                        <h2 className="text-lg font-bold text-gray-800 dark:text-white mb-4 flex items-center gap-2">
                                            {idx === 0 ? <Baby size={20} className="text-teal-500" /> : idx === 1 ? <User size={20} className="text-rose-500" /> : <CheckSquare size={20} className="text-indigo-500" />}
                                            {showAllLangs ? `${section.title.en} / ${section.title.pt}` : section.title[globalLang] || section.title.en}
                                        </h2>
                                        <div className="space-y-3">
                                            {section.items.map((item) => (
                                                <div
                                                    key={item.id}
                                                    onClick={() => toggleCheck(item.id)}
                                                    className="flex items-start gap-3 p-2 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg cursor-pointer group"
                                                >
                                                    <div className={`mt-0.5 w-5 h-5 rounded border flex items-center justify-center transition-colors ${checkedItems[item.id] ? 'bg-teal-500 border-teal-500 text-white' : 'border-gray-300 dark:border-gray-500 bg-white dark:bg-gray-700'
                                                        }`}>
                                                        {checkedItems[item.id] && <CheckSquare size={14} />}
                                                    </div>
                                                    <div className={`${checkedItems[item.id] ? 'opacity-50 line-through' : 'opacity-100'}`}>
                                                        <p className="font-medium text-sm text-gray-800 dark:text-gray-200">{item.label}</p>
                                                        {item.sub && <p className="text-xs text-gray-500 dark:text-gray-400 mt-0.5">{item.sub}</p>}
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}
                </div>
            </div>
        );
    };

    ReactDOM.createRoot(document.getElementById('root')).render(<BirthPlanApp />);
</script>

</body>
</html>
